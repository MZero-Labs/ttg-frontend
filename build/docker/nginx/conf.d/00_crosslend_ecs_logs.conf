# altered "combined" log_format
# http://nginx.org/en/docs/http/ngx_http_log_module.html#log_formatremote_addr
# http_x_real_ip instead of remote_addr
# http_x_request_id instead of "-"
log_format mzero escape=json '{'
        '"event": {'
            '"module": "ttg-frontend",'
            '"dataset": "ttg-frontend.access"'
        '},'
        '"@timestamp": "$time_local",'
        '"message": "$request",'
        '"level": "info",'
        '"http": {'
            '"request":{'
                '"ip": "$http_x_real_ip",'
                '"id": "$http_x_request_id",'
                '"referrer": "$http_referer",'
                '"method": "$request_method",'
                '"server":"$server_name"'
            '},'
            '"response": {'
                '"status": "$status",'
                '"bytes": $bytes_sent'
            '}'
        '},'
        '"url": {'
            '"original": "$request_uri",'
            '"path": "$uri",'
            '"query": "$query_string"'
        '},'
        '"user_agent": {'
            '"original": "$http_user_agent"'
        '},'
        '"user": {'
            '"name": "$remote_user",'
            '"id": "$http_x_user_id",'
            '"company_id": "$http_x_company_id",'
            '"roles": "$http_x_roles"'
        '}'
    '}';
